<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>jQuery To Do List üìù</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #e0f7fa; padding-top: 50px; display: flex; justify-content: center; }
        .container { background: white; padding: 30px; border-radius: 10px; width: 400px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; }
        button { background: #00bcd4; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; margin-bottom: 20px; }
        .todo-item { background: #fff; border-bottom: 1px solid #eee; padding: 15px; text-align: left; cursor: pointer; }
        .todo-item:hover { background: #ffebee; color: red; }
    </style>
</head>
<body>

    <div class="container">
        <h1>To Do List (jQuery)</h1>
        <button id="newBtn">New Task</button>
        <div id="ft_list"></div>
    </div>

    <script>
        $(document).ready(function() {
            loadCookies();

            // ‡∏õ‡∏∏‡πà‡∏° New
            $("#newBtn").click(function() {
                let text = prompt("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà:");
                if (text && text.trim() !== "") {
                    addTodo(text);
                    saveCookies();
                }
            });

            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á Todo (jQuery Style)
            function addTodo(text) {
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á div ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢ $('<div>')
                let div = $("<div>")
                    .addClass("todo-item")
                    .text(text)
                    .click(function() { // ‡∏ù‡∏±‡∏á event click ‡πÄ‡∏•‡∏¢
                        if (confirm("‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?")) {
                            $(this).remove(); // ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (this)
                            saveCookies();
                        }
                    });
                
                // ‡πÅ‡∏ó‡∏£‡∏Å‡πÑ‡∏ß‡πâ‡∏ö‡∏ô‡∏™‡∏∏‡∏î (.prepend)
                $("#ft_list").prepend(div);
            }

            // --- Cookies (‡πÉ‡∏ä‡πâ Logic ‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ jQuery ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Cookie) ---
            function saveCookies() {
                let todos = [];
                // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ children ‡∏Ç‡∏≠‡∏á #ft_list
                $("#ft_list").children().each(function() {
                    todos.push($(this).text());
                });
                
                let encoded = encodeURIComponent(JSON.stringify(todos));
                document.cookie = "ft_list=" + encoded + "; path=/; max-age=31536000";
            }

            function loadCookies() {
                let cookies = document.cookie.split(';');
                let cookieValue = null;
                for (let c of cookies) {
                    c = c.trim();
                    if (c.indexOf("ft_list=") === 0) {
                        cookieValue = c.substring(8);
                        break;
                    }
                }
                if (cookieValue) {
                    try {
                        let todos = JSON.parse(decodeURIComponent(cookieValue));
                        // ‡∏ß‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠ prepend ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö
                        for (let i = todos.length - 1; i >= 0; i--) {
                            addTodo(todos[i]);
                        }
                    } catch (e) {}
                }
            }
        });
    </script>
</body>
</html>
